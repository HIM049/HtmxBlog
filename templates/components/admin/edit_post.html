{{ define "edit_post" }}
<div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold text-gray-800">Edit Post</h1>

    <div id="save-indicator"
        class="text-sm font-semibold text-blue-600 opacity-0 transition-opacity duration-300 htmx-request:opacity-100">
        Saving changes...
    </div>
</div>

<div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 space-y-6">

    <div>
        <label class="block text-gray-700 text-sm font-bold mb-2" for="title">Title</label>
        <input
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline transition-colors duration-300 focus:border-blue-500"
            id="title" name="title" type="text" value="{{ .Post.Title }}" placeholder="Post Title"
            hx-patch="/api/admin/post/{{ .Post.ID }}" hx-trigger="keyup changed delay:500ms"
            hx-indicator="#save-indicator" hx-swap="none">
    </div>

    <div class="flex gap-4">
        <div class="w-2/3">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="category">Category Name</label>
            <input
                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                id="category" name="category" type="text" value="{{ .Post.Category.Name }}" placeholder="Category"
                hx-patch="/api/admin/post/{{ .Post.ID }}" hx-trigger="keyup changed delay:1s"
                hx-indicator="#save-indicator" hx-swap="none">
        </div>
        <div class="w-1/3">
            <label class="block text-gray-700 text-sm font-bold mb-2" for="cat_color">Color</label>
            <input
                class="shadow appearance-none border rounded w-full h-10 px-1 py-1 leading-tight focus:outline-none focus:shadow-outline cursor-pointer"
                id="cat_color" name="cat_color" type="color" value="{{ .Post.Category.Color }}"
                hx-patch="/api/admin/post/{{ .Post.ID }}" hx-trigger="change" hx-indicator="#save-indicator"
                hx-swap="none">
        </div>
    </div>

    <div>
        <label class="block text-gray-700 text-sm font-bold mb-2" for="tags">Tags</label>
        <input
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            id="tags" name="tags" type="text" value="{{ .Post.TagsToString }}" placeholder="Tags (comma separated)"
            hx-patch="/api/admin/post/{{ .Post.ID }}" hx-trigger="blur, keyup changed delay:2s"
            hx-indicator="#save-indicator" hx-swap="none">
    </div>

    <div>
        <label class="block text-gray-700 text-sm font-bold mb-2" for="custom_vars">Custom Vars (Key: Value)</label>
        <textarea
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-24 font-mono text-sm"
            id="custom_vars" name="custom_vars" placeholder="intro: Introduction text&#10;cover: /assets/image.jpg"
            hx-patch="/api/admin/post/{{ .Post.ID }}" hx-trigger="blur, keyup changed delay:2s"
            hx-indicator="#save-indicator" hx-swap="none">{{ .Post.CustomVarsToString }}</textarea>
    </div>

    <div class="mb-6">
        <label class="block text-gray-700 text-sm font-bold mb-2" for="content">Content</label>
        <textarea
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline h-96 font-mono"
            id="content" name="content" placeholder="Post Content (Markdown)" hx-patch="/api/admin/post/{{ .Post.ID }}"
            hx-trigger="keyup changed delay:2s, blur" hx-indicator="#save-indicator"
            hx-swap="none">{{ .Post.Content }}</textarea>
    </div>

</div>

{{ end }}

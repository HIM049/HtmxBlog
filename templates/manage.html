{{ define "manage" }}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/assets/style.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.8/dist/htmx.min.js"></script>
    <title>Manage</title>
</head>

<body class="bg-gray-100">
    <div class="container mx-auto mt-8 p-4">
        <div class="w-full max-w-lg mx-auto">
            <h1 class="text-3xl font-bold mb-6 text-center">Create New Post</h1>
            <form hx-post="/api/admin/post" hx-target="#result" hx-swap="innerHTML"
                class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="title">Title</label>
                    <input
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                        id="title" name="title" type="text" placeholder="Post Title" required>
                </div>
                <div class="flex gap-4 mb-4">
                    <div class="w-2/3">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="category">Category Name</label>
                        <input
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="category" name="category" type="text" placeholder="Category">
                    </div>
                    <div class="w-1/3">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="cat_color">Color</label>
                        <input
                            class="shadow appearance-none border rounded w-full h-10 px-1 py-1 leading-tight focus:outline-none focus:shadow-outline"
                            id="cat_color" name="cat_color" type="color" value="#0099cc">
                    </div>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="custom_vars">Custom Vars (Key:
                        Value)</label>
                    <textarea
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-24 font-mono text-sm"
                        id="custom_vars" name="custom_vars"
                        placeholder="intro: Introduction text&#10;cover: /assets/image.jpg"></textarea>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="content">Content</label>
                    <textarea
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline h-32"
                        id="content" name="content" placeholder="Post Content (Markdown)" required></textarea>
                </div>
                <div class="flex items-center justify-between">
                    <button
                        class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                        type="submit">
                        Create Post
                    </button>
                </div>
            </form>
            <div id="result" class="text-center mt-4 mb-8"></div>

            <h1 class="text-3xl font-bold mb-6 text-center pt-8 border-t border-gray-300">Create New Page</h1>
            <form hx-post="/api/admin/page" hx-target="#page-result" hx-swap="innerHTML"
                class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="page-name">Page Name</label>
                    <input
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                        id="page-name" name="name" type="text" placeholder="Page Name (e.g. About)" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2" for="page-route">Route</label>
                    <input
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                        id="page-route" name="route" type="text" placeholder="Route (e.g. /about)" required>
                </div>
                <div class="flex items-center justify-between">
                    <button
                        class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                        type="submit">
                        Create Page
                    </button>
                </div>
            </form>
            <div id="page-result" class="text-center mt-4"></div>

            <div class="mt-8 bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
                <h2 class="text-xl font-bold mb-4 border-b pb-2">Existing Pages</h2>
                <ul id="page-list" class="space-y-2">
                    {{ range .Pages }}
                    <li class="flex justify-between items-center p-2 hover:bg-gray-50 rounded">
                        <div>
                            <span class="font-semibold">{{ .Name }}</span>
                            <span class="text-sm text-gray-500 ml-2">({{ .Route }})</span>
                        </div>
                        <button hx-delete="/api/admin/page/{{ .Name }}"
                            hx-confirm="Are you sure you want to delete this page?" hx-target="closest li"
                            hx-swap="outerHTML"
                            class="text-red-500 hover:text-red-700 font-medium text-sm border border-red-200 hover:border-red-400 px-3 py-1 rounded transition">
                            Delete
                        </button>
                    </li>
                    {{ else }}
                    <li class="text-gray-500 italic text-center py-4">No pages found.</li>
                    {{ end }}
                </ul>
            </div>

            <div class="mt-8 bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
                <h2 class="text-xl font-bold mb-4 border-b pb-2">Existing Posts</h2>
                <ul id="post-list" class="space-y-2">
                    {{ range .Posts }}
                    <li class="flex justify-between items-center p-2 hover:bg-gray-50 rounded">
                        <div>
                            <span class="font-semibold">{{ .Title }}</span>
                            <span class="text-sm text-gray-500 ml-2">({{ .Category.Name }})</span>
                        </div>
                        <button hx-delete="/api/admin/post/{{ .ID }}"
                            hx-confirm="Are you sure you want to delete this post?" hx-target="closest li"
                            hx-swap="outerHTML"
                            class="text-red-500 hover:text-red-700 font-medium text-sm border border-red-200 hover:border-red-400 px-3 py-1 rounded transition">
                            Delete
                        </button>
                    </li>
                    {{ else }}
                    <li class="text-gray-500 italic text-center py-4">No posts found.</li>
                    {{ end }}
                </ul>
            </div>


        </div>
    </div>
</body>

</html>
{{ end }}
